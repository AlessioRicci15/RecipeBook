{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"/Users/alessioricci/projects/udemy/udemy-app/node_modules/@babel/runtime/helpers/asyncToGenerator\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MiddlewareResolver = void 0;\n\nconst injector_1 = require(\"../injector/injector\");\n\nclass MiddlewareResolver {\n  constructor(middlewareContainer) {\n    this.middlewareContainer = middlewareContainer;\n    this.instanceLoader = new injector_1.Injector();\n  }\n\n  resolveInstances(moduleRef, moduleName) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const middleware = _this.middlewareContainer.getMiddlewareCollection(moduleName);\n\n      const resolveInstance = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (wrapper) {\n          return _this.resolveMiddlewareInstance(wrapper, middleware, moduleRef);\n        });\n\n        return function resolveInstance(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      yield Promise.all([...middleware.values()].map(resolveInstance));\n    })();\n  }\n\n  resolveMiddlewareInstance(wrapper, middleware, moduleRef) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.instanceLoader.loadMiddleware(wrapper, middleware, moduleRef);\n    })();\n  }\n\n}\n\nexports.MiddlewareResolver = MiddlewareResolver;","map":null,"metadata":{},"sourceType":"script"}