{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"/Users/alessioricci/projects/udemy/udemy-app/node_modules/@babel/runtime/helpers/asyncToGenerator\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ModuleCompiler = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst module_token_factory_1 = require(\"./module-token-factory\");\n\nclass ModuleCompiler {\n  constructor(moduleTokenFactory = new module_token_factory_1.ModuleTokenFactory()) {\n    this.moduleTokenFactory = moduleTokenFactory;\n  }\n\n  compile(metatype) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        type,\n        dynamicMetadata\n      } = _this.extractMetadata(yield metatype);\n\n      const token = _this.moduleTokenFactory.create(type, dynamicMetadata);\n\n      return {\n        type,\n        dynamicMetadata,\n        token\n      };\n    })();\n  }\n\n  extractMetadata(metatype) {\n    if (!this.isDynamicModule(metatype)) {\n      return {\n        type: metatype\n      };\n    }\n\n    const {\n      module: type\n    } = metatype,\n          dynamicMetadata = tslib_1.__rest(metatype, [\"module\"]);\n\n    return {\n      type,\n      dynamicMetadata\n    };\n  }\n\n  isDynamicModule(module) {\n    return !!module.module;\n  }\n\n}\n\nexports.ModuleCompiler = ModuleCompiler;","map":null,"metadata":{},"sourceType":"script"}